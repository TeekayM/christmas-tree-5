<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Christmas Memory Tree 2025</title>
<link rel="icon" href="favicon.ico" />
<link rel="shortcut icon" href="favicon.ico" />

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />

<script>
  fetch("song.wav").then(r => console.log("Song loaded:", r.ok)).catch(e => console.log("Fetch error:", e));
</script>
<style>
  body {
    margin: 0;
    font-family: system-ui, sans-serif;
    background: linear-gradient(180deg, #82dbff 0%, #bbecff 90%, #ffffff 96%, #ffffff 100%);
    color: #08321f;
    text-align: center;
    width: 100%;
    height: 100vh;
    overflow: hidden;
  }

  .container {
    width: 100%;
    height: 100%;
    position: relative;
  }

  h1 {
    position: absolute;
    top: 12px;
    right: 24px;
    color: #ffffff;
    text-shadow: 0 2px 0 rgba(0,0,0,0.6), 0 6px 20px rgba(0,0,0,0.7);
    margin: 0;
    z-index: 5000;
  }

  /* tree positioned absolute at center-bottom */
  #treeArea {
    position: fixed;
    bottom: 1vh;
    left: 50%;
    transform: translateX(-50%);
    z-index: 5000;
    display: inline-block;
    width: fit-content;
    height: auto;
    overflow: visible;
    background: transparent;
    border: none;
  }

  #treeImage {
    max-width: 144vw;
    max-height: 90vh;
    height: auto;
    width: auto;
    object-fit: contain;
    pointer-events: none;
    user-select: none;
    display: block;
  }

  .ornament {
    position: absolute;
    width: 55px;
    height: 55px;
    pointer-events: none;
    user-select: none;
  }

  .ornament img {
    width: 100%;
    height: 100%;
    object-fit: contain;
  }

  /* full-screen snow canvas */
  #snowCanvas {
    position: fixed;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 4000;
  }

  /* snow mounds at bottom */
  #snowMounts {
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    height: 300px;
    pointer-events: none;
    z-index: 3500;
  }

  #snowMounts svg {
    width: 100%;
    height: 100%;
    display: block;
  }

  /* white background below mounts */
  #snowBg {
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    height: 300px;
    background: white;
    pointer-events: none;
    z-index: 2900;
  }

  /* hide activity log and other elements for now */
  .mainRow { display: none; }
  #bgAudio { display: none; }
  #playMusicBtn { display: none; }

  #activityLog {
    margin: 12px auto 6px auto;
    max-width: 900px;
    width: min(96vw, 500px);
    background: rgba(0, 0, 0, 0.2);
    border-left: 4px solid #ffd700;
    color: #fff8f0;
    padding: 8px 12px;
    font-size: 2vh;
    text-align: left;
    left: 12px;
    border-radius: 6px;
    position: absolute;
    z-index: 10001; 
    font: 14px monospace;
  }
  #activityLog h2 {
    margin: 0 0 6px 0;
    color: #ffe08a;
    font-size: 14px;
  }
  .log-list { list-style: none; padding: 0; margin: 0; }
  .log-entry { padding: 4px 0; border-bottom: 1px dashed rgba(255,255,255,0.04); }
  .log-entry:last-child { border-bottom: none; }
  .log-date { color: #ffd700; font-weight: 600; margin-right: 4px; }


</style>
</head>
<body>

<div class="container">
  <h1>ðŸŽ„ #chrismtas-tree-5</h1>

  <div id="treeArea">
    <img id="treeImage" src="tree.png" alt="Christmas Tree" />
    <div class="ornament" style="left: 22%; top: 78%; width: 17%; height: 17%;">
      <img src="./ornaments/1.png" alt="Ornament 1" />
    </div>
    <div class="ornament" style="left: 37%; top: 78%; width: 17%; height: 14%; rotate: 20deg;">
      <img src="./ornaments/2.png" alt="Ornament 1" />
    </div>
  </div>

  <div id="activityLog" aria-live="polite">
    <h2>Activity Log</h2>
    <ul class="log-list">
      <li class="log-entry"><span class="log-date">1/12/2025 22:31</span> -  Website redesign</li>
      <li class="log-entry"><span class="log-date">1/12/2025 21:52</span> -  Dante get the golden bough dante</li>
      <li class="log-entry"><span class="log-date">1/12/2025 16:10</span> -  Me petting my cat on the #chrismtas-tree-5</li>
      <li class="log-entry"><span class="log-date">1/12/2025 01:15</span> -  The Christmas tree is here!</li>
    </ul>
  </div>

  <audio id="bgAudio" autoplay loop playsinline preload="auto">
    <source src="./song.wav" type="audio/wav">
  </audio>
  <button id="playMusicBtn" class="hidden" aria-label="Play music" title="Play music">â–¶</button>
</div>


<canvas id="snowCanvas" aria-hidden="true"></canvas>




<script>
(function(){
  const canvas = document.getElementById('snowCanvas');
  if(!canvas) return;
  const ctx = canvas.getContext('2d');
  let W = 0, H = 0;
  function resize(){
    W = canvas.width = window.innerWidth;
    H = canvas.height = window.innerHeight;
  }
  window.addEventListener('resize', resize);
  resize();

  const particles = [];
  function initParticles(){
    particles.length = 0;
    const count = Math.min(250, Math.floor(W * H / 20000)) * 10;
    for(let i=0;i<count;i++) particles.push(createParticle());
  }
  function createParticle(){
    return {
      x: Math.random() * W,
      y: Math.random() * H,
      r: 1 + Math.random() * 2.5,
      vx: (Math.random() * 0.6) - 0.3,
      vy: 0.5 + Math.random() * 1.2,
      a: 0.6 + Math.random() * 0.4
    };
  }
  initParticles();

  window.addEventListener('resize', function(){
    resize();
    const newCount = Math.min(250, Math.floor(W * H / 20000));
    while(particles.length < newCount) particles.push(createParticle());
    particles.length = newCount;
  });

  function step(){
    ctx.clearRect(0,0,W,H);
    for(let p of particles){
      p.x += p.vx;
      p.y += p.vy;
      if(p.y > H + 10){ p.y = -10; p.x = Math.random() * W; }
      if(p.x > W + 10) p.x = -10;
      if(p.x < -10) p.x = W + 10;
      ctx.beginPath();
      ctx.fillStyle = 'rgba(255,255,255,' + p.a + ')';
      ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
      ctx.fill();
    }
    requestAnimationFrame(step);
  }
  requestAnimationFrame(step);
})();
</script>

<script>
(function(){
  const audio = document.getElementById('bgAudio');
  const btn = document.getElementById('playMusicBtn');
  if(!audio) return;

  function showButton(){
    if(btn) btn.classList.remove('hidden');
  }

  audio.play().then(()=>{
    if(btn) btn.classList.add('hidden');
  }).catch(err=>{

    console.log('Autoplay blocked or failed:', err);
    showButton();
  });

  function userGesture(){
    if(audio.paused){
      audio.play().catch(()=>{});
    }
    if(audio.muted) audio.muted = false;
    if(btn) btn.classList.add('hidden');
    document.removeEventListener('pointerdown', userGesture);
  }
  document.addEventListener('pointerdown', userGesture);

  if(btn){
    btn.addEventListener('click', function(e){
      e.stopPropagation();
      if(audio.paused) audio.play().catch(()=>{});
      if(audio.muted) audio.muted = false;
      btn.classList.add('hidden');
    });
  }
})();
</script>

<script>
// Simple positioning - tree is fixed absolute, mounts are fixed at bottom
// No complex JS needed anymore
</script>

</body>
</html>
